<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-device, initial-scale=1.0">
    <title>Interactive Guide to Hardware Selection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: The application is structured as a single-page dashboard with a fixed sidebar for navigation. This non-linear, thematic structure breaks the dense report into five logical phases of a project lifecycle (Strategy, Core Components, System Integration, Physical & Supply Chain, Market & Business). This is more user-friendly than a long scroll, allowing users to jump directly to the topic most relevant to their needs. Interactions like charts, calculators, and accordions are used to distill complex information into digestible, exploratory formats, promoting active learning over passive reading. A new section has been added to house the full, detailed report for deep-dive reading. -->
    <!-- Visualization & Content Choices: 
        1. SWaP-C Framework -> Goal: Compare -> Viz: Interactive Radar Chart -> Interaction: Buttons to switch between product profiles (e.g., Wearable, Industrial) update the chart to show different optimization priorities. Justification: Visually demonstrates the conflicting trade-offs in a way static text cannot. Library: Chart.js.
        2. Communication Protocols -> Goal: Compare -> Viz: Dynamic Bar Chart -> Interaction: Dropdown allows user to re-sort the chart based on different metrics (Speed, Range, Power). Justification: Turns a static data table into an interactive comparison tool, allowing users to analyze the data from multiple perspectives. Library: Chart.js.
        3. Total Cost of Ownership (TCO) -> Goal: Inform/Engage -> Viz: Interactive Calculator with Pie Chart -> Interaction: User inputs values into fields, and the pie chart updates in real-time to show the cost breakdown. Justification: Makes the abstract financial concept of TCO tangible and demonstrates how "hidden" costs can outweigh the initial component price. Library: Chart.js.
        4. Textual Content -> Goal: Organize/Inform -> Presentation: Accordions and Tabbed Cards -> Interaction: Click-to-reveal. Justification: Manages information density, preventing user overload by hiding detailed text until it's requested. Method: Vanilla JS + Tailwind.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .sidebar-link { transition: all 0.2s ease-in-out; }
        .sidebar-link.active, .sidebar-link:hover { background-color: #E5E7EB; color: #111827; transform: translateX(4px); }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .tab-button.active { border-color: #4F46E5; color: #4F46E5; }
        .report-content h3 { font-size: 1.875rem; font-weight: bold; margin-top: 2rem; margin-bottom: 1rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem; }
        .report-content h4 { font-size: 1.5rem; font-weight: bold; margin-top: 1.75rem; margin-bottom: 0.75rem; }
        .report-content h5 { font-size: 1.25rem; font-weight: bold; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .report-content p { margin-bottom: 1rem; line-height: 1.75; color: #4b5563; }
        .report-content ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        .report-content li { margin-bottom: 0.5rem; }
        .report-content strong { color: #111827; }
        .report-content table { width: 100%; margin-top: 1.5rem; margin-bottom: 1.5rem; border-collapse: collapse; }
        .report-content th, .report-content td { border: 1px solid #d1d5db; padding: 0.75rem; text-align: left; }
        .report-content th { background-color: #f9fafb; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="flex min-h-screen">
        <aside class="w-64 bg-white shadow-md p-4 fixed h-full hidden lg:block">
            <h1 class="text-xl font-bold text-gray-900 mb-6">Hardware Guide</h1>
            <nav id="sidebar-nav" class="space-y-2">
                <a href="#introduction" class="sidebar-link active flex items-center p-2 rounded-lg text-gray-600">
                    <span class="mr-3">üöÄ</span> Introduction
                </a>
                <a href="#strategy" class="sidebar-link flex items-center p-2 rounded-lg text-gray-600">
                    <span class="mr-3">üß≠</span> Phase 1: Strategy
                </a>
                <a href="#components" class="sidebar-link flex items-center p-2 rounded-lg text-gray-600">
                    <span class="mr-3">‚öôÔ∏è</span> Phase 2: Core Components
                </a>
                <a href="#integration" class="sidebar-link flex items-center p-2 rounded-lg text-gray-600">
                    <span class="mr-3">üîó</span> Phase 3: System Integration
                </a>
                <a href="#physical" class="sidebar-link flex items-center p-2 rounded-lg text-gray-600">
                    <span class="mr-3">üì¶</span> Phase 4: Physical & Supply
                </a>
                <a href="#business" class="sidebar-link flex items-center p-2 rounded-lg text-gray-600">
                    <span class="mr-3">üíº</span> Phase 5: Market & Business
                </a>
                 <a href="#report" class="sidebar-link flex items-center p-2 rounded-lg text-gray-600">
                    <span class="mr-3">üìñ</span> Full Report
                </a>
            </nav>
        </aside>

        <main class="flex-1 lg:ml-64 p-4 md:p-8">
            
            <section id="introduction" class="content-section active">
                <div class="bg-white p-8 rounded-xl shadow-lg">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">A Strategic Guide to Hardware Selection</h2>
                    <p class="text-gray-600 mb-4 text-lg">Hardware selection is a continuous process of strategic decision-making that begins at concept ideation and extends through manufacturing, deployment, and end-of-life management. This guide establishes a framework that aligns technical decisions with long-term business objectives, including market access, profitability, and product longevity.</p>
                    <p class="text-gray-600 mb-6">The core principle is a <strong class="text-indigo-600">Proactive-by-Design</strong> philosophy. This involves integrating considerations for the entire product lifecycle into the earliest design phases. By anticipating future challenges like component shortages, firmware updates, and regulatory hurdles, we can create products that are not only functional and cost-effective at launch but are also resilient, maintainable, and adaptable to the evolving technological and market landscape.</p>
                    
                    <div class="grid md:grid-cols-2 gap-6 mt-8">
                        <div class="border-l-4 border-red-500 p-4 bg-red-50 rounded-r-lg">
                            <h3 class="font-bold text-red-800">Reactive Approach (High Risk)</h3>
                            <p class="text-sm text-red-700 mt-2">Problems are addressed as they arise, leading to costly redesigns, schedule delays, and compromised product quality.</p>
                        </div>
                        <div class="border-l-4 border-green-500 p-4 bg-green-50 rounded-r-lg">
                            <h3 class="font-bold text-green-800">Proactive Approach (Strategic)</h3>
                            <p class="text-sm text-green-700 mt-2">The entire product lifecycle is considered in the earliest design phases, creating resilient, maintainable, and adaptable products.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="strategy" class="content-section">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Phase 1: Strategic Foundations</h2>
                <div class="space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">System Requirements Specification (SRS)</h3>
                        <p class="text-gray-600 mb-4">The SRS is the project's blueprint, translating stakeholder needs into detailed technical specifications. It's crucial for preventing "feature creep" and costly rework. Requirements are split into two key types.</p>
                        <div class="border-t pt-4">
                            <div class="accordion-item">
                                <button class="accordion-header w-full text-left font-semibold text-lg flex justify-between items-center py-2">
                                    <span>Functional Requirements: <em>What</em> the system does</span>
                                    <span>‚ñº</span>
                                </button>
                                <div class="accordion-content">
                                    <p class="p-4 bg-gray-100 rounded-lg text-gray-700">These define core capabilities and behaviors. They must be specific and verifiable. <br><strong>Example:</strong> <em>"The device shall measure ambient temperature every 5 seconds and transmit the data via Bluetooth Low Energy when a connection is active."</em></p>
                                </div>
                            </div>
                             <div class="accordion-item">
                                <button class="accordion-header w-full text-left font-semibold text-lg flex justify-between items-center py-2">
                                    <span>Non-Functional Requirements: <em>How</em> the system performs</span>
                                    <span>‚ñº</span>
                                </button>
                                <div class="accordion-content">
                                    <p class="p-4 bg-gray-100 rounded-lg text-gray-700">These are critical constraints and quality attributes that drive hardware selection. Examples include performance (response time), reliability (MTBF), power consumption, operating environment, security, and regulatory compliance (FCC, CE).</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Architecting for Evolution</h3>
                        <p class="text-gray-600 mb-4">A modern product must be designed for future updates and feature additions. This requires a modular architecture and a robust plan for Over-the-Air (OTA) updates.</p>
                        <div class="grid md:grid-cols-2 gap-6 mt-4">
                            <div class="bg-indigo-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-indigo-800">Modular Design</h4>
                                <p class="text-sm text-indigo-700 mt-1">Break the system into independent, interchangeable modules. This allows for easier maintenance, upgrades, and scalability without redesigning the entire system.</p>
                            </div>
                            <div class="bg-indigo-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-indigo-800">Secure OTA Updates</h4>
                                <p class="text-sm text-indigo-700 mt-1">Essential for security patches and new features. Requires sufficient memory (often double for A/B partitioning), a secure bootloader, and cryptographic firmware signing to prevent unauthorized changes.</p>
                            </div>
                        </div>
                        <div class="border-t pt-4 mt-4">
                            <div class="accordion-item">
                                <button class="accordion-header w-full text-left font-semibold text-lg flex justify-between items-center py-2">
                                    <span>Special Considerations for Robotic Systems</span>
                                    <span>‚ñº</span>
                                </button>
                                <div class="accordion-content">
                                    <p class="p-4 bg-gray-100 rounded-lg text-gray-700">Robotic systems demand extreme modularity for both hardware and software to accommodate frequent upgrades of sensors, actuators, and algorithms. Architectures must prioritize scalable compute platforms (e.g., supporting additional GPUs/FPGAs) and standardized interfaces (e.g., EtherCAT, MIPI CSI) to facilitate this evolution without complete redesigns. Frameworks like ROS are built on this principle of modularity.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">The SWaP-C Framework</h3>
                        <p class="text-gray-600 mb-4">Hardware selection is a balancing act between conflicting constraints. The SWaP-C (Size, Weight, and Power, and Cost) framework helps optimize these trade-offs. Select a product profile below to see how priorities shift.</p>
                        <div class="chart-container mx-auto h-96">
                            <canvas id="swapcChart"></canvas>
                        </div>
                        <div id="swapc-controls" class="flex justify-center flex-wrap gap-2 mt-4">
                            <button data-profile="wearable" class="bg-indigo-500 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-600 transition">Wearable Device</button>
                            <button data-profile="industrial" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition">Industrial Sensor</button>
                            <button data-profile="aerospace" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition">Aerospace System</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="components" class="content-section">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Phase 2: The Core Triad</h2>
                <div class="space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Central Processing Unit (CPU)</h3>
                        <p class="text-gray-600 mb-4">The "brain" of the system. The first choice is between a Microcontroller (MCU) for integrated, real-time control, and a Microprocessor (MPU) for complex applications running a full OS like Linux.</p>
                        <div class="grid md:grid-cols-2 gap-6 mt-4">
                            <div class="border rounded-lg p-4">
                                <h4 class="font-semibold text-lg">Microcontroller (MCU)</h4>
                                <ul class="list-disc list-inside text-gray-600 mt-2 text-sm space-y-1">
                                    <li>Highly integrated (CPU, RAM, Flash, Peripherals)</li>
                                    <li>Low power consumption</li>
                                    <li>Ideal for real-time control</li>
                                    <li>Cost-effective and compact</li>
                                </ul>
                            </div>
                             <div class="border rounded-lg p-4">
                                <h4 class="font-semibold text-lg">Microprocessor (MPU)</h4>
                                <ul class="list-disc list-inside text-gray-600 mt-2 text-sm space-y-1">
                                    <li>Powerful CPU core</li>
                                    <li>Requires external RAM and Flash</li>
                                    <li>Runs full operating systems (Linux, Android)</li>
                                    <li>For complex GUIs, networking, AI</li>
                                </ul>
                            </div>
                        </div>
                        <p class="text-gray-600 mt-4"><strong>Key takeaway:</strong> Vendor ecosystem (documentation, SDKs, support) is often more critical to project success and Total Cost of Ownership than a small difference in the per-unit price of the chip.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Memory Subsystem</h3>
                        <p class="text-gray-600 mb-4">Stores program code and data. A critical trade-off exists between speed, cost, and whether data persists when power is off.</p>
                        <div class="grid md:grid-cols-2 gap-6 mt-4">
                            <div>
                                <h4 class="font-semibold text-lg mb-2">Volatile Memory (RAM)</h4>
                                <div class="space-y-2">
                                    <p class="text-sm border-l-4 border-blue-400 pl-3"><strong>SRAM:</strong> Very fast, low power, expensive. Used on-chip for critical variables.</p>
                                    <p class="text-sm border-l-4 border-blue-400 pl-3"><strong>DRAM:</strong> Slower, cheaper, higher density. Used externally for large memory needs (e.g., with MPUs).</p>
                                </div>
                            </div>
                             <div>
                                <h4 class="font-semibold text-lg mb-2">Non-Volatile Memory (NVM)</h4>
                                <div class="space-y-2">
                                    <p class="text-sm border-l-4 border-green-400 pl-3"><strong>NOR Flash:</strong> Fast reads, allows Execute-in-Place (XIP). Ideal for firmware.</p>
                                    <p class="text-sm border-l-4 border-green-400 pl-3"><strong>NAND Flash:</strong> Fast writes, high density, cheaper. Ideal for bulk data storage.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Power Supply Architecture</h3>
                        <p class="text-gray-600 mb-4">A stable, efficient power supply is critical for reliability. The choice of regulator topology depends on efficiency needs and noise sensitivity.</p>
                        <div class="grid md:grid-cols-2 gap-6 mt-4">
                            <div class="bg-gray-100 p-4 rounded-lg">
                                <h4 class="font-semibold">Linear Regulators (LDOs)</h4>
                                <p class="text-sm text-gray-700 mt-1">Simple, low-cost, and produce a very "clean" output with low noise. However, they are inefficient, dissipating excess voltage as heat. Best for low-power or noise-sensitive analog components.</p>
                            </div>
                            <div class="bg-gray-100 p-4 rounded-lg">
                                <h4 class="font-semibold">Switch-Mode Power Supplies (SMPS)</h4>
                                <p class="text-sm text-gray-700 mt-1">Highly efficient (>90%) but more complex and can generate electrical noise. Essential for battery-powered devices or any application where efficiency is a primary concern.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="integration" class="content-section">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Phase 3: Connectivity & System Awareness</h2>
                 <div class="space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Communication Interfaces</h3>
                        <p class="text-gray-600 mb-4">Choosing the right communication protocols is a fundamental decision affecting power, range, and cost. Compare key protocols based on the metric most important to your application.</p>
                        <div class="flex items-center justify-center mb-4">
                            <label for="metric-select" class="mr-2 font-medium">Compare by:</label>
                            <select id="metric-select" class="p-2 border rounded-lg bg-white shadow-sm">
                                <option value="speed">Max Speed (kbps)</option>
                                <option value="range">Typical Range (m)</option>
                                <option value="power">Power Consumption</option>
                            </select>
                        </div>
                        <div class="chart-container mx-auto h-96">
                            <canvas id="commChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Diagnostics and Feedback</h3>
                        <p class="text-gray-600 mb-4">A robust product must be able to monitor its own health, report errors, and recover from faults. This is key to reliability and maintainability.</p>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4 text-center">
                            <div class="bg-gray-100 p-4 rounded-lg">
                                <h4 class="font-semibold">Feedback Sensors</h4>
                                <p class="text-sm mt-1">On-board sensors for temperature, voltage, and current are vital for monitoring system health, preventing damage, and ensuring safety.</p>
                            </div>
                            <div class="bg-gray-100 p-4 rounded-lg">
                                <h4 class="font-semibold">Error Logging</h4>
                                <p class="text-sm mt-1">Implement a structured logging framework (e.g., using a circular buffer) to capture critical errors and system state for easier debugging.</p>
                            </div>
                            <div class="bg-gray-100 p-4 rounded-lg">
                                <h4 class="font-semibold">Remote Diagnostics</h4>
                                <p class="text-sm mt-1">The ability to access logs and sensor data remotely is crucial for managing a fleet of deployed devices and reduces costly on-site service calls.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="physical" class="content-section">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Phase 4: Physical Design & Supply Chain</h2>
                <div class="space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Physical Design and Packaging</h3>
                        <p class="text-gray-600 mb-4">This phase translates the electronic schematic into a physical, manufacturable product. Key considerations include the enclosure, connectors, and PCB layout.</p>
                         <div id="physical-tabs" class="border-b border-gray-200 mb-4">
                            <nav class="-mb-px flex space-x-6">
                                <button data-tab="enclosure" class="tab-button active whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500">Enclosure</button>
                                <button data-tab="connectors" class="tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500">Connectors</button>
                                <button data-tab="pcb" class="tab-button whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500">PCB Layout</button>
                            </nav>
                        </div>
                        <div id="physical-content">
                            <div data-content="enclosure" class="tab-content active">
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                    <li><strong>Material Selection:</strong> A trade-off between cost, durability, and thermal properties (e.g., plastics for volume, metals for ruggedness).</li>
                                    <li><strong>IP Rating:</strong> Defines protection against dust and water (e.g., IP67), a critical requirement based on the operating environment.</li>
                                    <li><strong>Thermal Management:</strong> The design must dissipate heat using passive (vents, heat sinks) or active (fans) methods to ensure reliability.</li>
                                    <li><strong>Design for Manufacture (DFM):</strong> The enclosure must be designed to be easily and cost-effectively produced at scale.</li>
                                </ul>
                            </div>
                             <div data-content="connectors" class="tab-content hidden">
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                    <li><strong>Functionality:</strong> Choose based on electrical needs (current, voltage, signal type).</li>
                                    <li><strong>Reliability:</strong> Evaluate mating cycles, temperature range, and vibration resistance.</li>
                                    <li><strong>Standardization:</strong> Use industry-standard connectors (USB, RJ45) whenever possible to improve interoperability and reduce cost.</li>
                                </ul>
                            </div>
                             <div data-content="pcb" class="tab-content hidden">
                                <ul class="list-disc list-inside space-y-2 text-gray-700">
                                    <li><strong>Design for Manufacture (DFM):</strong> Adhere to manufacturer constraints (trace width, spacing) to ensure high yield and reliability.</li>
                                    <li><strong>Design for Assembly (DFA):</strong> Optimize component placement to facilitate automated soldering and minimize manual labor.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Navigating the Global Supply Chain</h3>
                        <p class="text-gray-600 mb-4">A successful product is a manufacturable one. This depends on a resilient and well-managed supply chain.</p>
                        <div class="space-y-4 mt-4">
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                                <h4 class="font-semibold text-yellow-800">Component Sourcing</h4>
                                <p class="text-sm text-yellow-700">Source exclusively from authorized distributors to guarantee authenticity and avoid counterfeit parts. Mitigate risk by identifying and qualifying second-source or alternative components for every critical part in your design.</p>
                            </div>
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                                <h4 class="font-semibold text-yellow-800">Proactive Obsolescence Management</h4>
                                <p class="text-sm text-yellow-700">Components will eventually go End-of-Life (EOL). Continuously monitor your Bill of Materials (BOM) for discontinuance notices and have a plan, whether it's a last-time buy or transitioning to a pre-qualified alternative, to avoid costly production stops.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="business" class="content-section">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Phase 5: Market & Business Imperatives</h2>
                <div class="space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Global Market Access: Certifications</h3>
                        <p class="text-gray-600 mb-4">Regulatory compliance is a non-negotiable legal prerequisite for selling a product. Each major market has its own rules for safety and radio interference. Failure to comply can result in fines, recalls, and sales bans.</p>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mark</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Region</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Scope</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium">FCC</td><td class="px-4 py-3 whitespace-nowrap text-sm">USA</td><td class="px-4 py-3 text-sm">RF Emitting Devices</td></tr>
                                    <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium">CE</td><td class="px-4 py-3 whitespace-nowrap text-sm">European Economic Area</td><td class="px-4 py-3 text-sm">Most electronic products</td></tr>
                                    <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium">PSE</td><td class="px-4 py-3 whitespace-nowrap text-sm">Japan</td><td class="px-4 py-3 text-sm">Electrical Appliances</td></tr>
                                    <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium">UL</td><td class="px-4 py-3 whitespace-nowrap text-sm">North America (Global)</td><td class="px-4 py-3 text-sm">Product Safety</td></tr>
                                    <tr><td class="px-4 py-3 whitespace-nowrap text-sm font-medium">RoHS</td><td class="px-4 py-3 whitespace-nowrap text-sm">EU (Global)</td><td class="px-4 py-3 text-sm">Hazardous Substances</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Vendor Ecosystem & Lock-in</h3>
                        <p class="text-gray-600 mb-4">Becoming too dependent on a single vendor's proprietary technology can be risky. Mitigate this by prioritizing open standards, diversifying suppliers, and ensuring your data is portable.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold mb-3">Total Cost of Ownership (TCO) Calculator</h3>
                        <p class="text-gray-600 mb-4">The true cost of a product is far more than its Bill of Materials (BOM). TCO includes development, certification, maintenance, and other "hidden" costs. Use this calculator to see how these factors contribute to the total cost over a product's lifecycle.</p>
                        <div class="grid md:grid-cols-2 gap-8 items-center">
                            <div id="tco-form" class="space-y-3">
                                <div>
                                    <label class="text-sm font-medium text-gray-700">BOM Cost ($)</label>
                                    <input type="number" id="bom-cost" value="15" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-gray-700">NRE (Development) Cost ($)</label>
                                    <input type="number" id="nre-cost" value="50000" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-gray-700">Certification Cost ($)</label>
                                    <input type="number" id="cert-cost" value="15000" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                                </div>
                                <div>
                                    <label class="text-sm font-medium text-gray-700">Unit Volume</label>
                                    <input type="number" id="unit-volume" value="10000" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                                </div>
                            </div>
                            <div class="chart-container mx-auto h-72 md:h-80">
                                <canvas id="tcoChart"></canvas>
                                <div id="tco-total" class="text-center mt-2 font-bold text-xl"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="report" class="content-section">
                <div class="bg-white p-8 rounded-xl shadow-lg report-content">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">A Strategic Guide to Hardware Selection</h2>
                    
                    <h3>Introduction: A Strategic Framework for Hardware Selection</h3>
                    <h4>Purpose and Scope</h4>
                    <p>This report provides a comprehensive, multi-disciplinary guide to the hardware selection process for commercial electronic products. It moves beyond component-level datasheets to establish a strategic framework that aligns technical decisions with long-term business objectives, including market access, profitability, and product longevity. The selection of hardware is not a singular event in the product development lifecycle but a continuous process of strategic decision-making that begins at concept ideation and extends through manufacturing, deployment, and end-of-life management. This document is intended for technical leaders, project managers, and systems engineers who are tasked with navigating the complex interplay of technical specifications, commercial constraints, regulatory requirements, and supply chain realities.</p>
                    
                    <h4>The Proactive-by-Design Philosophy</h4>
                    <p>Modern hardware development demands a fundamental shift from a reactive to a proactive design philosophy. Decisions made in the initial architectural stages have compounding effects on the total cost, reliability, and time-to-market of the final product. A reactive approach, where problems such as component shortages, certification failures, or the need for critical feature updates are addressed as they arise, inevitably leads to costly redesigns, schedule delays, and compromised product quality.</p>
                    <p>The Proactive-by-Design philosophy, which forms the core thesis of this report, posits that anticipating future challenges is the most effective way to mitigate them. This involves integrating considerations for the entire product lifecycle into the earliest design phases. For instance, a proactive approach to supply chain management involves selecting components with multiple sources and long lifecycle forecasts from the outset, rather than scrambling to find a replacement for an obsolete part mid-production. Similarly, planning for obsolescence by designing with industry-standard components and having a clear end-of-life (EOL) strategy prevents the costly scramble that occurs when a critical component is suddenly discontinued. Furthermore, embedding security and the capability for remote updates into the core architecture is not an optional feature but a foundational requirement for any modern connected device, safeguarding against future threats and extending the product's viable lifespan. By adopting this forward-looking mindset, development teams can create products that are not only functional and cost-effective at launch but are also resilient, maintainable, and adaptable to the evolving technological and market landscape.</p>

                    <h3>Part I: Strategic Foundations: System Architecture and Long-Term Vision</h3>
                    <p>This foundational section establishes the high-level architectural decisions that dictate the project's trajectory. These initial choices are the most critical, as they create the framework within which all subsequent component-level and physical design decisions will be made. A well-defined architecture ensures the final product is adaptable, maintainable, and aligned with its intended lifecycle.</p>
                    
                    <h4>1.1 Defining Comprehensive System Requirements</h4>
                    <h5>The System Requirements Specification (SRS) as the Project Blueprint</h5>
                    <p>The System Requirements Specification (SRS) is the authoritative document that serves as the project's blueprint. It is the formal translation of stakeholder needs and market research into a detailed technical specification. A comprehensive and well-articulated SRS is the single most critical element for project success, as it forms the basis for all subsequent system architecture, design, integration, and verification activities. Its primary purpose is to create a clear, unambiguous agreement between all stakeholders‚Äîincluding engineering, marketing, and management‚Äîon what the system will do and how it will perform. This clarity is essential for preventing "feature creep," managing expectations, and avoiding the expensive and time-consuming rework that results from misunderstood or incomplete requirements. An effective SRS is not merely a list of features; it is a parent document that guides the creation of design specifications, test plans, and validation checks, ensuring that the final product aligns with the initial vision.</p>
                    
                    <h5>Functional vs. Non-Functional Requirements</h5>
                    <p>System requirements are broadly divided into two categories: functional and non-functional. Both are equally important for defining the product.</p>
                    <ul>
                        <li><strong>Functional Requirements:</strong> These define <em>what</em> the system must do. They describe the core capabilities, behaviors, and functions of the product from the user's perspective. These requirements should be specific and verifiable. For example, a functional requirement for a smart thermostat might be: <em>"The device shall measure ambient temperature every 5 seconds and transmit the data via Bluetooth Low Energy when a connection is active."</em> This statement is clear, measurable, and defines a specific action the system must perform.</li>
                        <li><strong>Non-Functional Requirements:</strong> These define <em>how</em> the system must perform its functions. They are the critical constraints, quality attributes, and operational conditions that the system must adhere to. These requirements are often overlooked in early stages but are frequently the primary drivers of hardware selection and overall system architecture. Key non-functional requirements include:
                            <ul>
                                <li><strong>Performance:</strong> Specifies metrics like response time, throughput, and latency.</li>
                                <li><strong>Reliability:</strong> Defines the system's ability to perform its function without failure, often specified as Mean Time Between Failures (MTBF).</li>
                                <li><strong>Power Consumption:</strong> Crucial for battery-powered devices, this specifies the power budget in various operating modes.</li>
                                <li><strong>Operating Environment:</strong> Defines the physical conditions the product must withstand.</li>
                                <li><strong>Security:</strong> Specifies requirements for data confidentiality, integrity, and authentication.</li>
                                <li><strong>Regulatory and Compliance:</strong> Lists the target markets and the corresponding mandatory certifications.</li>
                            </ul>
                        </li>
                    </ul>

                    <h4>1.2 Architecting for Evolution: Modularity, Extensibility, and Upgradability</h4>
                    <h5>Principles of Modular Design</h5>
                    <p>A modular architecture is a design principle that involves breaking down a complex system into smaller, independent, and interchangeable components, known as modules. This approach is fundamental to creating systems that are maintainable, reusable, and scalable. Each module is designed to handle a specific function and communicates with other modules through well-defined, standardized interfaces.</p>
                    
                    <h5>Planning for Over-the-Air (OTA) Updates</h5>
                    <p>In the era of connected devices, the ability to update firmware and software remotely is no longer a luxury but a critical necessity. Over-the-Air (OTA) updates are essential for deploying security patches, fixing bugs discovered after launch, and delivering new features to customers, thereby extending the product's useful lifespan and enhancing its value over time. This capability must be designed into the system's core architecture from the project's inception; it cannot be effectively added as an afterthought.</p>

                    <h4>1.3 The SWaP-C Framework: A Multidimensional Analysis</h4>
                    <p>The SWaP-C framework‚Äîwhich stands for Size, Weight, and Power, and Cost‚Äîis a design methodology used to optimize the physical and financial characteristics of a system. Originating in military and aerospace applications where these constraints are paramount, the framework has become increasingly relevant across all sectors of electronics design, from industrial IoT to consumer wearables.</p>
                    <ul>
                        <li><strong>Size (S):</strong> Refers to the physical volume, dimensions, and overall footprint of the product.</li>
                        <li><strong>Weight (W):</strong> Refers to the mass of the product.</li>
                        <li><strong>Power (P):</strong> Refers to the energy consumption of the device and its associated thermal output.</li>
                        <li><strong>Cost (C):</strong> This parameter extends beyond the initial BOM cost to encompass the Total Cost of Ownership (TCO).</li>
                    </ul>
                    <p>Successfully applying the SWaP-C framework is an exercise in managing complex and often conflicting trade-offs. Optimizing one parameter frequently comes at the expense of another.</p>

                    <h3>Part V: The Business of Hardware: Commercial and Legal Imperatives</h3>
                    <p>This final section addresses the critical non-engineering aspects of a hardware project. Success is not only determined by technical excellence but also by navigating the complex landscape of legal compliance, managing vendor relationships effectively, and maintaining rigorous financial discipline.</p>

                    <h4>5.1 Global Market Access: A Guide to Certifications</h4>
                    <h5>Why Compliance is Mandatory</h5>
                    <p>Regulatory compliance is a non-negotiable, legal prerequisite for market access. These regulations are established by governments to ensure that electronic products are safe for consumers, do not interfere with radio communications, and do not contain hazardous materials harmful to human health and the environment. Failure to comply can result in severe consequences, including substantial fines, mandatory product recalls, seizure of goods at customs, sales bans, and even criminal prosecution for the responsible parties.</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Mark/Certification</th>
                                <th>Region</th>
                                <th>Governing Body</th>
                                <th>Scope (Typical Product Type)</th>
                                <th>Process Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>FCC</strong></td>
                                <td>USA</td>
                                <td>Federal Communications Commission</td>
                                <td>RF Emitting Devices (Intentional & Unintentional Radiators)</td>
                                <td>SDoC (self-declaration) or 3rd Party Lab Test + TCB Approval</td>
                            </tr>
                            <tr>
                                <td><strong>CE</strong></td>
                                <td>European Economic Area</td>
                                <td>European Commission</td>
                                <td>Most electronic products, machinery, medical devices, toys</td>
                                <td>Self-Declaration with Technical File; Notified Body for some products</td>
                            </tr>
                            <tr>
                                <td><strong>PSE</strong></td>
                                <td>Japan</td>
                                <td>Ministry of Economy, Trade, and Industry (METI)</td>
                                <td>Electrical Appliances and Materials</td>
                                <td>Self-Declaration (Round PSE) or 3rd Party Cert + Factory Audit (Diamond PSE)</td>
                            </tr>
                            <tr>
                                <td><strong>VCCI</strong></td>
                                <td>Japan</td>
                                <td>Voluntary Control Council for Interference</td>
                                <td>Information Technology Equipment (EMC)</td>
                                <td>3rd Party Lab Test + Self-Registration (Voluntary but expected)</td>
                            </tr>
                            <tr>
                                <td><strong>UL</strong></td>
                                <td>Primarily North America (Globally Recognized)</td>
                                <td>Underwriters Laboratories</td>
                                <td>Standalone products (Listed) and components (Recognized)</td>
                                <td>3rd Party Lab Test + Factory Surveillance (Voluntary but often required by market)</td>
                            </tr>
                            <tr>
                                <td><strong>RoHS</strong></td>
                                <td>European Union (Globally influential)</td>
                                <td>European Commission</td>
                                <td>Most Electrical and Electronic Equipment</td>
                                <td>Part of CE marking process; requires supply chain diligence</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>5.4 Calculating the Total Cost of Ownership (TCO)</h4>
                    <h5>Beyond the BOM</h5>
                    <p>Total Cost of Ownership (TCO) is a comprehensive financial analysis framework designed to calculate the full lifecycle cost of an asset or product. It goes far beyond the initial purchase price or the BOM cost to include all direct and indirect costs incurred from acquisition through operation, maintenance, and disposal. Focusing solely on the unit price of components is a common and often costly mistake in electronics manufacturing, as it ignores the significant "hidden" costs that determine the true profitability of a product.</p>
                    
                    <h5>Using TCO for Strategic Decisions</h5>
                    <p>The power of TCO analysis lies in its ability to facilitate more informed, strategic decisions. By quantifying the long-term financial impact of different choices, it allows for a true "apples-to-apples" comparison. For example, consider a choice between two microcontrollers. MCU A has a unit price of $2.00, while MCU B costs $2.50. A decision based solely on BOM cost would favor MCU A. However, MCU B comes from a vendor with a superior, mature SDK and excellent technical support that is projected to reduce the software development time by one month. A TCO analysis would capture the engineering cost savings (e.g., one month of a developer's salary) associated with choosing MCU B. In most scenarios, this NRE saving will far outweigh the additional $0.50 per unit in BOM cost, revealing MCU B as the more cost-effective choice overall. TCO provides a holistic financial lens through which to evaluate all major hardware and vendor selection decisions.</p>
                    
                    <h3>Part VI: Special Considerations for Robotics and Upgradable Systems</h3>
                    <p>Robotic systems represent one of the most complex integrations of hardware and software, where the need for frequent upgrades is not an exception but the norm. The rapid evolution of perception algorithms, machine learning models, and actuator technologies means that a robotic platform must be designed for continuous evolution. This necessitates an even more rigorous application of the Proactive-by-Design philosophy, with a primary focus on modularity and scalability.</p>
                    
                    <h4>6.1 The Imperative of a Modular Hardware Architecture</h4>
                    <p>A monolithic design is a death sentence for a robotics project. The ability to swap, upgrade, or add components without a complete system redesign is paramount.</p>
                    <ul>
                        <li><strong>System-on-Module (SoM) Approach:</strong> Instead of designing a single, large PCB with a specific processor, a common strategy is to use a System-on-Module (SoM) that contains the core MPU, RAM, and Flash. This SoM plugs into a simpler, custom-designed carrier board that breaks out the required I/O. This architecture allows the core compute to be upgraded to a more powerful SoM in the future by simply designing a new, compatible carrier board, leaving the rest of the system's hardware intact.</li>
                        <li><strong>Standardized Busing and Interfaces:</strong> The use of high-performance, standardized buses is critical for interoperability. For instance, <strong>EtherCAT</strong> is a real-time industrial Ethernet protocol that allows for deterministic control of a large number of motor drives and I/O modules with very low latency. Using such a standard allows for the easy addition or replacement of actuators from different vendors. Similarly, for perception, standardizing on interfaces like <strong>MIPI CSI-2</strong> for cameras or Gigabit Ethernet for lidars and 3D sensors ensures a wider choice of compatible components.</li>
                        <li><strong>Scalable Compute Platforms:</strong> The computational demands of modern robotics, especially for tasks like simultaneous localization and mapping (SLAM), navigation, and AI-based object recognition, are immense and constantly growing. The hardware architecture must be scalable. This often means designing a system that can accommodate additional processing units, such as dedicated <strong>Graphics Processing Units (GPUs)</strong> for parallel computation, <strong>FPGAs</strong> for custom hardware acceleration of specific algorithms, or specialized <strong>AI accelerators</strong> for efficient neural network inference.</li>
                    </ul>
                    
                    <h4>6.2 Software Architecture for Seamless Upgrades</h4>
                    <p>The software must be architected to be independent of the specific underlying hardware to the greatest extent possible. This is the only way to facilitate frequent and reliable upgrades.</p>
                    <ul>
                        <li><strong>Hardware Abstraction Layers (HALs):</strong> A HAL is a layer of software that provides a consistent API for the application code to interact with hardware, regardless of the specific component being used. Frameworks like the <strong>Robot Operating System (ROS)</strong> are built around this concept. A well-designed HAL means that the high-level navigation software doesn't need to know if it's getting data from a Lidar made by Vendor A or Vendor B; it just interacts with the standardized "Lidar data" interface provided by the HAL. This makes swapping hardware components a much simpler task that is isolated to the driver level.</li>
                        <li><strong>Containerization (e.g., Docker):</strong> As robotic software systems grow in complexity, managing dependencies becomes a major challenge. Containerization technologies like Docker allow software components and all their dependencies to be packaged into isolated, portable containers. This ensures that a new software module can be deployed onto the robot without conflicting with the libraries and dependencies of existing modules. It dramatically simplifies the process of testing and deploying frequent software updates in a reliable and repeatable manner.</li>
                        <li><strong>Transactional, Multi-Component OTA Updates:</strong> The OTA update process for a robot is far more complex than for a simple IoT device. An update may involve pushing new firmware to the main compute unit, dozens of individual motor controllers, and multiple sensors simultaneously. This process must be <strong>transactional</strong>, meaning either all components update successfully, or the entire system rolls back to its previous state. A partial update, where some components are on the new version and others are on the old, could leave the robot in a dangerous, non-functional state. This requires a sophisticated OTA management system that can coordinate the update across the entire distributed system and verify the integrity of each component before committing the change.</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const sidebarLinks = document.querySelectorAll('#sidebar-nav a');
    const contentSections = document.querySelectorAll('.content-section');

    const setActiveLink = (hash) => {
        sidebarLinks.forEach(link => {
            if (link.getAttribute('href') === hash) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
    };

    const showContent = (hash) => {
        contentSections.forEach(section => {
            if ('#' + section.id === hash) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        });
    };
    
    sidebarLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            history.pushState(null, null, targetId);
            setActiveLink(targetId);
            showContent(targetId);
        });
    });

    window.addEventListener('popstate', () => {
        const hash = window.location.hash || '#introduction';
        setActiveLink(hash);
        showContent(hash);
    });

    const initialHash = window.location.hash || '#introduction';
    setActiveLink(initialHash);
    showContent(initialHash);

    const accordionItems = document.querySelectorAll('.accordion-item');
    accordionItems.forEach(item => {
        const header = item.querySelector('.accordion-header');
        const content = item.querySelector('.accordion-content');
        header.addEventListener('click', () => {
            const isExpanded = content.style.maxHeight && content.style.maxHeight !== '0px';
            if (isExpanded) {
                content.style.maxHeight = '0px';
                header.querySelector('span:last-child').textContent = '‚ñº';
            } else {
                content.style.maxHeight = content.scrollHeight + 'px';
                header.querySelector('span:last-child').textContent = '‚ñ≤';
            }
        });
    });

    const physicalTabs = document.querySelectorAll('#physical-tabs .tab-button');
    const physicalContents = document.querySelectorAll('#physical-content .tab-content');
    physicalTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            physicalTabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            const target = tab.getAttribute('data-tab');
            physicalContents.forEach(content => {
                if (content.getAttribute('data-content') === target) {
                    content.classList.remove('hidden');
                    content.classList.add('active');
                } else {
                    content.classList.add('hidden');
                    content.classList.remove('active');
                }
            });
        });
    });

    let swapcChart, commChart, tcoChart;

    const swapcData = {
        wearable: [5, 2, 5, 3, 4],
        industrial: [2, 4, 3, 5, 5],
        aerospace: [4, 5, 4, 5, 2],
    };

    function createSwarmChart(profile) {
        const ctx = document.getElementById('swapcChart').getContext('2d');
        if (swapcChart) {
            swapcChart.destroy();
        }
        swapcChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['Size', 'Weight', 'Power', 'Reliability', 'Cost'],
                datasets: [{
                    label: profile.charAt(0).toUpperCase() + profile.slice(1),
                    data: swapcData[profile],
                    backgroundColor: 'rgba(79, 70, 229, 0.2)',
                    borderColor: 'rgba(79, 70, 229, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(79, 70, 229, 1)',
                }]
            },
            options: {
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: { font: { size: 14 } },
                        suggestedMin: 0,
                        suggestedMax: 5,
                        ticks: { stepSize: 1, display: false }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) { label += ': '; }
                                label += ['Low Priority', 'Low', 'Medium', 'High', 'Very High'][context.raw - 1];
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }

    const swapcControls = document.getElementById('swapc-controls');
    if(swapcControls) {
        swapcControls.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const profile = e.target.dataset.profile;
                createSwarmChart(profile);
                swapcControls.querySelectorAll('button').forEach(btn => {
                    btn.classList.remove('bg-indigo-500', 'text-white');
                    btn.classList.add('bg-gray-200', 'text-gray-800');
                });
                e.target.classList.add('bg-indigo-500', 'text-white');
                e.target.classList.remove('bg-gray-200', 'text-gray-800');
            }
        });
        createSwarmChart('wearable');
    }


    const commData = {
        labels: ['UART', 'I2C', 'SPI', 'Wi-Fi', 'BLE', 'Zigbee', 'LoRaWAN'],
        speed: [1000, 3400, 100000, 1000000, 2000, 250, 50],
        range: [1, 1, 1, 100, 100, 100, 10000],
        power: [2, 2, 3, 5, 1, 1, 0.5],
    };
    const powerLabels = { 0.5: 'Extremely Low', 1: 'Very Low', 2: 'Low', 3: 'Medium', 5: 'High' };

    function createCommChart(metric) {
        const ctx = document.getElementById('commChart').getContext('2d');
        if (commChart) {
            commChart.destroy();
        }
        
        const sortedIndices = Array.from(Array(commData.labels.length).keys()).sort((a, b) => commData[metric][b] - commData[metric][a]);
        const sortedLabels = sortedIndices.map(i => commData.labels[i]);
        const sortedData = sortedIndices.map(i => commData[metric][i]);

        let chartTitle = '';
        let tooltipCallback = (context) => `${context.raw.toLocaleString()}`;
        
        if (metric === 'speed') {
            chartTitle = 'Max Speed (kbps, log scale)';
        } else if (metric === 'range') {
            chartTitle = 'Typical Range (m, log scale)';
        } else {
            chartTitle = 'Relative Power Consumption';
            tooltipCallback = (context) => powerLabels[context.raw];
        }

        commChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: sortedLabels,
                datasets: [{
                    label: chartTitle,
                    data: sortedData,
                    backgroundColor: 'rgba(14, 165, 233, 0.6)',
                    borderColor: 'rgba(14, 165, 233, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: (metric === 'power') ? 'linear' : 'logarithmic',
                        title: { display: true, text: chartTitle }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: tooltipCallback } }
                }
            }
        });
    }

    const metricSelect = document.getElementById('metric-select');
    if(metricSelect) {
        metricSelect.addEventListener('change', (e) => {
            createCommChart(e.target.value);
        });
        createCommChart('speed');
    }

    function createTcoChart() {
        const bom = parseFloat(document.getElementById('bom-cost').value) || 0;
        const nre = parseFloat(document.getElementById('nre-cost').value) || 0;
        const cert = parseFloat(document.getElementById('cert-cost').value) || 0;
        const volume = parseFloat(document.getElementById('unit-volume').value) || 1;

        const totalBom = bom * volume;
        const totalOneTime = nre + cert;
        const totalCost = totalBom + totalOneTime;
        const perUnitCost = totalCost / volume;

        document.getElementById('tco-total').textContent = `Total Per-Unit Cost: $${perUnitCost.toFixed(2)}`;

        const ctx = document.getElementById('tcoChart').getContext('2d');
        if (tcoChart) {
            tcoChart.destroy();
        }
        tcoChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Total BOM Cost', 'NRE (Development)', 'Certification'],
                datasets: [{
                    data: [totalBom, nre, cert],
                    backgroundColor: ['#34D399', '#FBBF24', '#F87171'],
                }]
            },
            options: {
                maintainAspectRatio: false,
                responsive: true,
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                let value = context.raw;
                                let percentage = (value / totalCost * 100).toFixed(1);
                                return `${label}: $${value.toLocaleString()} (${percentage}%)`;
                            }
                        }
                    }
                }
            }
        });
    }
    
    const tcoForm = document.getElementById('tco-form');
    if(tcoForm) {
        tcoForm.addEventListener('input', createTcoChart);
        createTcoChart();
    }
});
</script>
</body>
</html>
